(()=>{"use strict";function t(t,e,o){document.addEventListener(t,(t=>{t.target.matches(e)&&o(t)}))}const e={project:document.querySelector('[data-template="project"')};class o{constructor(t,e){this.name=t,this.color=e,this.id=Date.now(),this.todoList=[]}}const n="todoList.projects";function c(){if(n,localStorage.getItem("todoList.projects"))return JSON.parse(localStorage.getItem(n));{const t=[new o("Default","grey")];return r(t),t}}function r(t){localStorage.setItem(n,JSON.stringify(t))}function a(t){i(t),d()}function l(){const t=document.createDocumentFragment();c().forEach((o=>{const n=function(t){const o=function(t){if(null!=t)return document.importNode(t.content,!0)}(e.project),n=o.querySelector(".project-name"),c=o.querySelector(".project-color"),r=o.querySelector(".todo-count");return o.querySelector(".project").dataset.projectId=t.id,n.textContent=t.name,r.textContent=t.todoList.length,c.style.color=t.color,o}(o);t.appendChild(n)})),function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(s.projectsContainer),s.projectsContainer.appendChild(t)}const s={body:document.body,sideMenu:document.querySelector("[data-side-menu]"),overlay:document.getElementById("overlay"),projectsContainer:document.getElementById("projects-container"),projectNameInput:document.getElementById("input-project-name"),projectColorInput:document.getElementById("input-project-color")};function i(t){null!=t&&t.classList.remove("modal--active")}function d(){null!=s.overlay&&s.overlay.classList.remove("active")}t("click","[data-header-toggle]",(function(){null!=s.sideMenu&&(window.matchMedia("(min-width: 768px)").matches?(s.body.classList.toggle("desktop-open"),s.sideMenu.classList.remove("mobile-open")):(s.body.classList.contains("desktop-open")||s.body.classList.add("desktop-open"),s.sideMenu.classList.toggle("mobile-open")))})),t("click","[data-modal-target]",(t=>{(function(t){null!=t&&t.classList.add("modal--active")})(document.querySelector(t.target.dataset.modalTarget)),null!=s.overlay&&s.overlay.classList.add("active")})),t("click","#overlay",(function(){document.querySelectorAll(".modal--active").forEach((t=>{i(t)})),d()})),t("click",'[data-btn="close-modal"]',(t=>{a(t.target.closest(".modal"))})),t("submit",'[data-form="create-project"]',(function(t){t.preventDefault();const e=t.target,n={name:s.projectNameInput.value,color:s.projectColorInput.options[s.projectColorInput.selectedIndex].dataset.cssColor};if(!function(t){return null!=t.name&&""!==t.name.trim()}(n))return;const i=function(t){const e={...t};return e.name=e.name.trim(),e}(n);!function(t){const e=c();e.push(t),r(e)}(new o(i.name,i.color)),l(),e.reset(),a(e.closest(".modal"))})),l()})();